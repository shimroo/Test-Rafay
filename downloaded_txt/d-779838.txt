  sql index -- ocelot computer services inc.











 
company info


download


peter gulutzan's blog


screenshots


books by employees
glossary


home

 








ocelotgui

version 2.4.0
the ocelotgui gui, a database client, allows users to connect to
a mysql or mariadb dbms server, enter sql statements, and receive results.
some of its features are: syntax highlighting, user-settable colors
and fonts for each part of the screen, result-set displays
with multi-line rows and resizable columns, and a debugger.
copyright (c) 2024 by peter gulutzan.
all rights reserved.
for the gpl license terms see https://github.com/ocelot-inc/ocelotgui/blob/master/license.gpl.
for instructions for end users see the user manual.
for ocelotgui screenshots see http://ocelot.ca/screenshots.htm.
for ocelotgui/debugger screenshots see http://ocelot.ca/blog/the-ocelotgui-debugger.
this readme file has installation instructions, screenshots, and the user manual.
contents
installing
... prerequisites
... getting the qt library
... getting the libmysqlclient.so library
... getting the ocelotgui executable package
... starting the program
illustrating
... some screenshots
using
... user manual
... executive summary
... the developer, the product, and the status
... downloading, installing, and building
... starting
... statement widget
... client statements
... history widget
... result widget
... menu
... debugger
... special effects
... explorer widget
... erdiagram
... charts
... make your own menus
... make your own plugins/a>
... contact
appendixes
... appendix 1 details about ocelotgui options
... appendix 2 reference for the ocelotgui debugger
... appendix 3 tarantool
... appendix 4 windows
... appendix 5 getting and using the ocelotgui source
prerequisites
the installation instructions in this section are for linux.
if you prefer to run on windows, read the installation instructions
in appendix 4 windows
and come back to read the user manual section.

the basic prerequisites for installation are linux, and the qt library.
the libmysqlclient library will also be necessary, at runtime.
getting the qt library
you probably will find that the qt package is already installed,
since other common packages depend on it. if not, your linux
distro's repositories will provide a qt package.
for example, on some platforms you can say
"sudo apt-get install libqt5core5a libqt5widgets5" , on others you can say "dnf install qt qt-x11",
on others you can say "dnf install qt5-qtbase qt5-qtbase-gui".

the qt version number can be found with find /usr/lib -name "libqt*gui.so*", or find /usr/lib64 -name "libqt*gui.so*".
if the response starts with libqtgui.so.4 then you have qt4,
if the response starts with libqt5gui.so.5 then you have qt5.
alternatively it sometimes can be found with qmake -v.
peter gulutzan supplies executables only for qt version 5, but
often appropriate files are downloaded automatically during ocelotgui installation.
to force use of a different qt version you can build from source.

the qt library is necessary for ocelotgui installation.
getting the libmysqlclient.so library
you may find that the libmysqlclient.so library is already installed,
if you have used a mysql or mariadb client program before.
if not, your linux distro's repositories will contain it,
usually with a package name like "libmysqlclient-dev" or "libmysqlclient-devel".
with fedora the package name may be "mariadb-devel" and the library
name may be "libmariadb.so" or "libmariadbclient.so".
a tip for mageia 5: you can use "urpmf " to find
what packages contain libmysqlclient.so.
if the answer is lib64mariadb18, you can install it with:
sudo urpmi lib64mariadb18.
a tip for opensuse 13.1: if neither qt nor libmysqlclient libraries exist, say:

 sudo zypper install libqt5-devel
 sudo zypper install mariadb-client
 sudo zypper install libmysqlclient-devel
the important file is named "libmysqlclient.so" or something similar.
if it is not already on the default path, then an error or warning
will appear when you try to run ocelotgui. find it, and say something like
export ld_run_path=[path to directory that contains libmysqlclient.so]
several other directories are searched; for details start ocelotgui
after installation and choose help | libmysqlclient.
the libmysqlclient library is not necessary for ocelotgui installation;
however, it is necessary at runtime in order to connect to a mysql or mariadb server.
getting the ocelotgui executable package

there are ocelotgui binary packages for platforms such as ubuntu/mint/mx where "debian-like" packages
are preferred, or platforms such as mageia/suse/fedora (but not centos 7) where "rpm-like" packages
are preferred.
if one of the following ocelotgui binary packages is compatible with your platform,
cut and paste the corresponding pair of instructions onto your computer and
you can be up and running in about 15 seconds.
for 32-bit, debian-like, qt5
wget https://github.com/ocelot-inc/ocelotgui/releases/download/2.4.0/ocelotgui_2.4.0-1_i386.deb
sudo apt install ./ocelotgui_2.4.0-1_i386.deb
for 64-bit, debian-like, qt5
wget https://github.com/ocelot-inc/ocelotgui/releases/download/2.4.0/ocelotgui_2.4.0-1_amd64.deb
sudo apt install ./ocelotgui_2.4.0-1_amd64.deb
for 64-bit, rpm-like, qt5
wget https://github.com/ocelot-inc/ocelotgui/releases/download/2.4.0/ocelotgui-2.4.0-1.x86_64.rpm
sudo rpm -i ocelotgui-2.4.0-1.x86_64.rpm
for 64-bit, any linux, qt5
wget https://github.com/ocelot-inc/ocelotgui/releases/download/2.4.0/ocelotgui-2.4.0.tar.gz
tar zxvf ocelotgui-2.4.0.tar.gz
ocelotgui/ocelotgui-qt5
for 64-bit, any linux, qt4 (deprecated)
wget https://github.com/ocelot-inc/ocelotgui/releases/download/2.4.0/ocelotgui-2.4.0.tar.gz
tar zxvf ocelotgui-2.4.0.tar.gz
ocelotgui/ocelotgui-qt4

starting the program
after installing and making sure that ocelotgui is on the
path, start it with
ocelotgui
or use options, for example
ocelotgui --host=127.0.0.1 --user=joe --password=secret
-- if the program starts, and menu items such as help|manual
work, then installation is successful.
stop again with file|exit or control-q.

some screenshots












user manual
version 2.4.0, june 4 2024
copyright (c) 2024 by peter gulutzan. all rights reserved.
this program is free software; you can redistribute it and/or modify  
it under the terms of the gnu general public license as published by  
the free software foundation; version 2 of the license.
this program is distributed in the hope that it will be useful,  
but without any warranty; without even the implied warranty of  
merchantability or fitness for a particular purpose. see the  
gnu general public license for more details.
you should have received a copy of the gnu general public license  
along with this program; if not, write to the free software  
foundation, inc., 51 franklin st, fifth floor, boston, ma 02110-1301 usa
executive summary
the ocelotgui application, previously called
'the ocelot graphical user interface', allows users to connect to
a mysql or mariadb dbms server, enter sql statements, and receive results.
some of its features are: syntax highlighting, user-settable colors
and fonts for each part of the screen, and result-set displays
with multi-line rows and resizable columns, plugins, and a debugger.
the developer, the product, and the status
peter gulutzan is a canadian
who has specialized in database products for thirty years,
as an employee of ocelot computer services inc. and
mysql ab and sun microsystems and oracle and hp, or as a
contractor for a large company in eastern europe.
the ocelotgui program is a front end which connects to mysql (tm) or mariadb (tm).
in some ways it is like the basic mysql client program,
with added gui features: full-screen editing, syntax
highlighting, tabular display, customized fonts and colors.
it differs from some other front-end gui products because
it is open source (gpl), it is written in c++, and it makes use
of the qt multi-platform widget library.
the product status is: stable. it has been known to work as described in
this manual on several linux distros. it is stable, in the sense that
there are no known severe errors and the features are frozen until the
next version.
peter gulutzan will address any bug reports and will answer any questions.
downloading, installing, and building
to download the product go to
https://github.com/ocelot-inc/ocelotgui.
instructions for installation will be in the readme.md file.
this location may change, or alternate locations may appear.
if so there will either be an announcement on github or on ocelot.ca.
the package contains source code and an executable file named ocelotgui-qt5.
starting

there must be an instance of mysql or mariadb running somewhere.  


if connection is possible with the mysql client and does not require
unusual options, then connection is possible with ocelotgui. if there is
a my.cnf file, ocelotgui will read it, just as the mysql client would.
if there are connection-related options on the command line, ocelotgui
will accept them just as the mysql client would. therefore the typical
way to start the program is to say  
ocelotgui [--option [--option...]]  

for a description of options see  appendix 1 details about ocelotgui options.



if a password is required but not supplied, a dialog box will appear.
or, if the initial attempt to connect fails, an error message will appear
saying it is necessary to choose file|connect, which will cause the dialog
box to appear. the dialog box has many possible settings
(see the list in appendix 1;
however, for getting started, the ones that matter most are the ones
at the top: host, port, user, socket, password, protocol.  
if the connection still fails, then ocelotgui will still come up,
but only non-dbms tasks such as screen customizing will be possible.




in any case, an initial screen will appear. after some activity has
taken place, the screen will have four parts, from top to bottom:
menu 
history widget, where retired statements and diagnostics end up 
results widget, where select result sets appear 
statement widget, where users can type in instructions.
(and optionally, on the side, an explorer widget.)
initially, though, only the menu and statement widget will appear.


again, this should be reminiscent of the way the mysql client works:
statements are typed at the bottom of the screen, and appear to
scroll off the top after they are executed, with results in the middle.  

statement widget
the statement widget is an editable multi-line text box.
the usual control keys that work on other text editors will work
here too; see the later description of menu item: edit.
the program includes a syntax checker and can recognize the parts of
speech in mysql grammar.
it will do syntax highlighting
by changing the color, for example comments will appear in light green,
identifiers in green, operators in dark gray, and so on.  
the colors can be
customized, see the later description of menu item: settings.

the left side of the statement widget is reserved for the prompt,
and cannot be typed over. initially the prompt will be 'mysql>'
but this can be changed, see the later description of
client statements: prompt.  



for example, this screenshot shows the statement widget
after the user has changed the default prompt and
entered an sql statement.
the statement has keywords in magenta, literals in dark green,
operators in light green, and comments in red.
the prompt on the left has a gray background.


major feature alert: this is not merely a gui that only will
highlight words that are in a list of keywords.
this gui will parse the complete mysql or mariadb grammar,
without needing to ask the server. so the highlighting
will be correct, syntax errors will be underlined in red,
and -- since the parsing method is predictive -- there will be
continuous hints about what word is expected next, and
optionally an error message explaining suspected syntax problems
before they go to the server.
once a statement has been entered and is ready to be executed,
the user can hit control-e, choose menu item run|execute, or
place the cursor at the end of the text (after the ';' or other
delimiter) and type enter. it is legal to enter multiple
statements, separated by semicolons, and then execute them
in a single sequence.
client statements
a client statement is a statement which changes some behavior
of the client (that is, of the ocelotgui front end) but does not
necessarily go to the mysql/mariadb server. of the statements
that the mysql reference manual describes in section
'mysql client commands' https://dev.mysql.com/doc/refman/8.0/en/mysql-commands.html
the ocelotgui program has working equivalents for: clear, delimiter, exit,
prompt, source, tee, and warnings. for example, entering 'quit;'
followed by enter will cause the program to stop. it is
sometimes not mandatory to end a client statement with ';',
but is strongly recommended.
there are some enhancements affecting the prompt statement.
the special sequence '\2' means 'repeat the prompt on all lines',
and the special sequence '\l' means 'show line numbers'. for example,
'prompt \2\lmariadb;' will change the prompt so that each line begins
with '[line number] mariadb>'.
history widget
once a statement has been executed, a copy of the statement text
and the diagnostic result (for example: 0.04 seconds, ok) will
be placed in the history widget. everything in the history widget
is editable including the prompt, and it simply fills up so that
after a while the older statements are scrolled off the screen.  
thus its main function is to show what recent statements and
results were. statements in the history can be retrieved while
the focus is on the statement widget, by selecting 'previous statement'
or 'next statement' menu items.
initially the history widget will show some statements from past
sessions which are stored in a history file.
result widget

if a statement is select or show or some other statement that
returns a result set, it will appear in the result widget in
the middle area of the screen. the result widget is split up
into columns. each column has a header and details taken from
what the dbms returns.  


the width of the column depends on the result set's definition,
but extremely wide columns will be split onto multiple lines.
that is, one result-set row may take up to five lines.  
if the data still is too wide or too tall to fit in the cell,
then the row will get a vertical scroll bar. the user can
change the width of a column by dragging the column's right
border to the right to make the column wider, or to the left
to make it narrower.  


the result widget as a whole may have a horizontal and a vertical
scroll bar. the vertical scroll bar moves a row at a time rather
than a pixel at a time -- this makes large result sets more
manageable, but makes the vertical scroll bar unresponsive if
each row has multiple lines and the number of rows is small.  


for example, this screenshot shows the whole screen after the
user has typed the statement "select * from information_schema.tables;"
on the statement widget and then executed it. the statement text
has been copied to the history widget, the statement widget has
been cleared, the result widget has the rows. the user has
dragged the border of the fourth column to the left, causing
a scroll bar to appear.







menu
the menu at the top of the screen has file, edit, run, settings,
options, debug and help.


file|connect, or ctrl+o, starts the connect dialog box.  
file|exit, or ctrl+q, stops the program.
file|export brings up a dialog box for exporting selections.




edit|undo or ctrl+z, edit|redo or ctrl+shift+z, edit|cut or ctrl+x,
edit|cut or ctrl+x, edit|copy or ctrl+c, edit|paste or ctrl+v,
and edit|select or ctrl+a, all work in the conventional manner.
edit|redo can only redo the last change.  
previous statement or ctrl+p and next statement or ctrl+n will
copy earlier statements from the history widget into the statement
widget, so that they can be edited or re-executed with run|execute
or ctrl+e.
format or alt+shift+f changes what is in the statement
widget according to a simple style guide. autocomplete or tab will
be discussed later.




run|execute or ctrl+e or ctrl+enter causes execution of whatever is in the
statement widget.  
run|kill or ctrl+c tries to stop execution -- this
menu item is enabled only when a long-running statement
needs to be aborted by user intervention.




settings|menu, settings|history widget, settings|grid widget,
settings|statement, and settings|extra rule 1 are
items which affect the behavior of each
individual widget. the color settings affect foregrounds,
backgrounds, borders, and (for the statement widget only)
the syntax highlights. the font settings affect font family,
boldness, italics, and size.
there may be additional choices affecting appearance,
for example the width of the border used to drag columns
in the result widget.
settings|extra rule 1 is conditional -- for example, to specify
that blobs should be displayed as images on a pink background,
set grid background color pink, set condition = data_type like
'%blob', set display as = image, then click ok.




options|detach history widget,
options|detach result grid widget,
options|detach debug widget are
for turning the respective widgets into independent windows,
so that they can be moved away from the statement widget,
or resized. a detached widget is always kept on top of the
other widgets in the application screen. when a widget is
already detached, the menu item text will change to "attached"
and clicking it will put the widget back in its original position.




the items on the debug menu are enabled only when a debug session
is in progress. the way to debug sql stored procedures or functions
will be explained in a later section.




help|about will show the license and copyright and version.
help|the manual will show the contents of readme.md (the manual that you are reading) if readme.md is on the same path as
the ocelotgui program; otherwise it will show a copyright, a gpl license, and a pointer to readme.md.
help|libmysqlclient will advise about finding and loading the libmysqlclient.so library.
help|settings will advise about how to use the settings menu items.


debugger


it is possible to debug stored procedures and functions.  
this version of ocelotgui incorporates mdbug
(read about mdbug at http://bazaar.launchpad.net/~hp-mdbug-team/mdbug/trunk/view/head:/debugger.txt).  
all debugger instructions can be entered on the ocelotgui command line;  
some operations can also be done via the debug menu or by clicking on the stored-procedure display.  
currently-supported instructions are:  
$install -- this is always the first thing to do.  
$setup routine_name [, routine_name ...] -- prepares so '$debug routine_name' is possible.  
$debug routine_name -- starts a debug session, shows routines in a tabbed widget.  
$breakpoint routine_name line_number or debug|breakpoint -- sets a breakpoint.  
$clear routine_name line_number -- clears a breakpoint.  
$next or debug|next -- goes to next executable line, without dropping into subroutines.  
$step or debug|step -- goes to next executable line, will drop into subroutines.  
$continue or debug|continue -- executes until breakpoint or until end of procedure.  
$refresh breakpoints -- refreshes xxxmdbug.breakpoints table.  
$refresh server_variables -- refreshes xxxmdbug.server_variables table.  
$refresh variables -- refreshes xxxmdbug.variables table.  
$refresh user_variables -- refreshes xxxmdbug.user_variables table.  
$exit or debug|exit -- stops a debug session.  



for a walk through a debugger example, with screenshots, see
this blog post: http://ocelot.ca/blog/the-ocelotgui-debugger.  
for reference, read: appendix 2 reference for the ocelotgui debugger (ocelotgui)">.

special effects


vertical: if a user starts the program with ocelotgui --vertical=1
or ends a statement with backslash g, results come up with one column per row.  




images: if a user chooses settings | extra rule 1 from the menu,
and sets the condition and display as boxes as described earlier,
and selects rows which contain longblob columns, and the column values are
images (such as png or jpeg or bmp or gif format data), ocelotgui will display
the result as images.  



result-set editing: if a user clicks on a column in the result set
and makes a change, an update statement will appear in the statement widget.
for example, if a result set is the result from select column1, column2 from t;,
and the column1 value is 5, and the column2 value is 'abc', and the user changes
the column2 value to 'ab', then the
statement widget will show update t set column2 = 'ab' where column1 = 5 and column2 = 'ab';.
the user then has the choice of ignoring the update statement or executing it.  



detaching: if a user chooses options | detach history widget or
options | detach result grid widget, then the widget will become a separate window
which can be moved or resized.  




colors: the colors and fonts dialog boxes have a simple way to choose
colors, by selecting from a choice of 148 color names / color icons. users can also
change colors by saying set object_name_color = color-name | hex-rgb-value.  
in fact ocelotgui mixes the modes: for example if a user chooses settings | grid text color,
then clicks on the 'red' icon, then clicks ok, ocelotgui generates a
statement "set ocelot_grid_text_color = 'red';". this makes the instruction
easy to repeat or put in a script.


re: sql_mode. to distinguish between literals and identifiers enclosed
in double quotes, ocelotgui needs to know the value of sql_mode (ansi_quotes).
it calculates this automatically; however, in rare circumstances it can
fail to detect changes on the server. if that appears to be the case, say
set session sql_mode = @@session.sql_mode; to update it.
re: autocompletion. while a user is entering an sql statement,
ocelotgui will display a list of possible words that may follow.
hitting the tab key will cause the first word in the list to be
displayed and accepted.
users can use arrow keys to select other words,
and can use "set ocelot_shortcut_autocomplete='...'; to choose a different key instead of the tab key,
and can use "set ocelot_completer_timeout=...'; to choose how many seconds the list will be visible,
and can use "rehash;" to update the list.




re: hinting for column names. although hints for syntax appear by
default, hints for table / column identifiers might not. in order to
make identifiers appear on the hint list: (1) ensure the setting
for auto_rehash has not been turned off, and/or (2) enter the statement
"rehash;" to make the client ask the server for a list of identifiers
in the current database; (3) when entering an sql statement, type `
(backtick) at the point where an identifier is expected.
re: font. by default, ocelotgui uses a fixed-pitch (mono) font that
has similar attributes to whatever font was in use
at the time it started. this may be a bad choice.
we recommend trying out other fonts with the settings menu
for each widget.
re: permanent customizing. changes to settings can be done
with the settings menu items, but such changes are not permanent.
so note the commands that ocelotgui performs when settings are
changed, and paste them into a file. later this file can be
executed (for example with source file-name), whenever ocelotgui
is started again. alternatively, settings can be placed in
an options file such as my.cnf.


re: conditional settings. to override the ordinary settings
for result set displays there is a special set statement with a where clause:
set ocelot_grid_setting = string|integer [, ocelot_grid_value = string-or-integer...]
where condition [and|or condition ...];
where ocelot_grid_setting is ocelot_grid_background_color | ocelot_grid_font_style |  etc.,
and condition has the form item comparison-operator literal, where
item is column_name | column_number | column_type | row_number | value,
and comparison-operator is = | > | >= | < | <= | <> | is | regexp.
for example to say "i want the background color to be pink if
it's in the fourth column of the result set and it's null", say
set ocelot_grid_background_color='pink' where column_number = 4 and value is null;

re: debugging with mysql 5.7. oracle has made a significant
incompatible behavior change in version 5.7, which affects the
debugger. the originally recommended workaround was to say
"set global show_compatibility_56=on;". we believe we made a
more permanent fix for this problem in ocelotgui version 1.0.8.
re: connection dialog. as stated earlier, if a password is necessary
to connect, it is sufficient to start ocelotgui with "--password=password"
or by choosing file|connect and typing a password in the password
field (the sixth field in the connection dialog box). also on the
connection dialog box, if the server is running on the same computer
as the ocelotgui client, it is sometimes a good idea to enter
'127.0.0.1' in the host field, instead of 'localhost'.
re: row numbers. ocelotgui will replace the value 'row_number() over ()'
with the row number within the result set. for example, try
select 'row_number() over ()' as r, table_name.* from table_name;
to disable this feature, start ocelotgui with --ocelot_client_side_functions=0.
re: hovering. use the mouse to hover over a word in the
statement widget, and ocelotgui will display what kind of word
it is, for example "table identifier".
re: format. click edit|format, and ocelotgui will change the contents of
the statement widget so that keywords are upper case and
sub-clauses or sub-statements are indented.
re: history. by default the history does not contain any rows
from result sets of previous statements. to change this, click
settings|history and enter a number for max row count.
also users can change the history file name with histfile=name,
change what statements should not go to the ihstory file with histignore=regexp,
change whether the history file will include system-generated comments with ocelot_histfileflags='l'|'lp',
change how large the history file can become with ocelot_histfilesize=number,
change how large the initial history can become with ocelot_histsize=number.

re: export. a result set can be dumped to a file as text, as table, or as html.

re: show. there is a way to make show (and similar statements like analyze or check or checksum or describe or explain or help)
accept select-style clauses and return select-style result sets. details are in the blog post
make show as good as select.

re: tarantool. by default ocelotgui is a client for mysql or mariadb.
to use it as a client for tarantool, read
appendix 3 tarantool.
explorer widget
explorer name. explorer.
a similar feature in other gui clients may be named "object explorer" or "navigator".
compare the name "windows explorer".
explorer settings.
to change some significant settings, click on the menu bar: settings|explorer.

visible: yes|no. default no. so if you don't change this to 'yes', it is not visible.
there must be a connection to the dbms server before it can be made visible.
sort alphabetically: yes|no. default no. if 'yes', objects of the same type are sorted alphabetically.
query: a long select with unions.
the default query selects all databases.
users can change this query to add where clauses (affects mysql/mariadb only).
detached|top|left|width|height:
as with other widgets, the explorer is detachable and the explorer's size + position are settable
when it is detached.
unlike with other widgets, changing width may have an effect even if the explorer is not detached.
the default width depends on the widths of the object names.


ordinarily the explorer widget appears on the left while the other main widgets
(history, grid, statement) appear vertically on the right.

explorer style. it is a result grid with text columns.
therefore users get some features without needing to learn anything new:
* ^find works. (if the item is visible)
* vertical scroll bar works.
* settings | explorer can be used to change colors and font.
* example: set ocelot_explorer_text_color='blue' where value = 'â¶'; refresh;

explorer columns. there are three text columns.
#1: min. = unicode black down-pointing triangle â¼ or black right-pointing triangle â¶ if database or table.
if it's a database or table, click on the triangle to hide the parts e.g. columns, or to show them again.
(this is "toggling".)
it's treated as a header item, that is, result grid settings for header affect it.
so ordinarily it has a different background color.
#2: object_type. = s or t or v or c or p or i or e or t
#3: object_name. for example, if object_type='t', this is a table name.
if object_type='c', this is a column name and is taken from part_name.

explorer rows.
rows are in a hierarchy: s, t or v, c or i, etc.
within the hierarchy, rows are in order by creation time.

explorer possible user actions
hover. this will show what type of object is under the cursor and contain some short advice.
doubleclick: this will copy the cell contents to the end of the statement widget
right click: puts up a context menu.
click on the leftmost (min) column. this will "toggle".

explorer context menu.
this is the menu that will appear when the user uses the right mouse button to click
over a row in the explorer display.
it is called a context menu because the menu is different for each object type.
for example if it's over a table, then table-related menu items will appear.
items for all types: copy to clipboard, send to sql editor, reset, refresh.
items for 's' (schema): set as default schema, filter to this schema, schema inspector,
create schema, alter schema, drop schema.
items for 't' (table): select rows, export dialog - text, export dialog - table,
export dialog - html, import - text, create table, create table like, drop table, truncate table.
for 'c' (column): show column, drop column.
for 'i' (index): show index, select index, drop index.
for 'p' (procedure): create procedure, drop procedure.
details for 't':

  copy to clipboard      equivalent of "copy"
  send to sql editor     copy, then put in statement widget, then execute
  select rows            execute a statement to select 100 rows
  export dialog - text   dialog box for export, then do the export if ok
  export dialog - table  dialog box for export, then do the export if ok
  export dialog - html   dialog box for export, then do the export if ok
  import - text          generate inserts for a file's contents, no options
  create table           generate show create table ...
  create table like      generate create table ... like ...
  drop table             generate drop table
  truncate table         generate truncate table
  reset                  back to default state with nothing expanded
  refresh                big select to recreate the widget (this can be slow)


explorer example.

the user makes the explorer visible with settings|explorer widget, it looks like this:

the user clicks the â¶ beside information_schema, it changes to â¼
and the schema items appear:

the user right-clicks on collations, and the context menu appears:

the user navigates (with the mouse or the down-arrow key) and selects
(with enter or tab or click) the export dialog - text choice, and
the export dialog appears:

the user selects the ok button and the contents are dumped to stdout:


explorer set statements.
the user can enter set statements on the select widget.
or, some set statements will be generated when the user clicks ok on the settings menu.
keywords are
ocelot_explorer_action,
ocelot_explorer_applicable_dbmss,
ocelot_explorer_applicable_types,
ocelot_explorer_background_color,
ocelot_explorer_detached,
ocelot_explorer_enabled,
ocelot_explorer_font_family,
ocelot_explorer_font_size,
ocelot_explorer_font_style,
ocelot_explorer_font_weight,
ocelot_explorer_height,
ocelot_explorer_left,
ocelot_explorer_shortcut,
ocelot_explorer_text,
ocelot_explorer_text_color,
ocelot_explorer_top,
ocelot_explorer_visible,
ocelot_explorer_width.
the important one is set ocelot_explorer_visible='yes';
settings can also be done in the .cnf file or the command line,
for example start ocelotgui with --ocelot_explorer_visible='yes'.
such statements affect both the explorer widget and its context menu.
note: some settings changes do not take effect immediately, they are delayed until "refresh" happens.

explorer conditional set statements.
there is an optional clause ... where value operator 'literal' [{and|or} value operator 'literal' ...].
statements with where clauses affect only rows which match the expression.
example:
set ocelot_explorer_background_color='blue' where value > 'p' or value regexp '1';


explorer refresh statement.
refresh is a bit similar to rehash, but it gets all schemas (databases)
-- so has an effect on the server.
refresh is necessary because we don't know when other users might change data definitions.
and it's slow.
whenever users say refresh, the explorer tables are redone.

explorer in options menu. choosing options|detach explorer widget,
and rearranging widgets, could result in something like this:


explorer advanced-level customizing.
as explained earlier, customizing the appearance of the explorer widget
and the context menu, or specific rows on them, is simple
and somewhat like the customizing of the other widgets.
however, one can do more with the context menu -- change the text and
action and shortcut.
here, for example, is a statement that says
there will be a shortcut associated with the refresh option:
set ocelot_explorer_shortcut='alt+g' where value = 'refresh';
here, for example, is a statement that says
"instead of 'create table', the 't' menu choice will be
'select count(*)' and the effect, if you click it,
or type the shortcut key, will be that the
statement "select count(*) from (table-name-in-context);" will appear on the statement widget,
where it is executed, so the result count appears in the grid widget.
set ocelot_explorer_action='select count(*) from ${object_name};',
 ocelot_explorer_text='customized selection'
where value = 'create table';
in other words, users can write their own explorer widgets.
many of the possible actions can have "macros"
-- strings enclosed inside ${...} that will be replaced when the statement is executed.
some macros are:
... ${dialog-table} ${dialog_file} ${occurs_text} ${schema_name} ${object_name}
'${object_name}' ${part_name} ${unqualified_part_name} '${part_name}'
${part_type} ${cell} ${clipboard} ${action}.
since ocelotgui source code is supplied, users can
download it and see the exact effects by reading the c++ statements in program ocelotgui.cpp,
function context_menu::replacer().

erdiagram


an entity relationship diagram ("erdiagram") is a graphic display of tables (in rectangles) and foreign-key relationships
(as lines). the prerequisite is the existence of an explorer widget, that is,
set ocelot_explorer_visible='yes';
is necessary before requesting an erdiagram.
an erdiagram may either be requested from the explorer or from the statement widget.
when it's requested from the statement widget, the syntax is:
set ocelot_query = show erdiagram of schema_name [columns primary] [lines in background] [tables (table-list];
for example, to get the picture shown here, if you have the well-known "sakila" database, say
set ocelot_query = show erdiagram of sakila columns primary;


the optional clause columns primary means "show only the columns which are part of a primary key instead of all columns",
the optional clause lines in background means "draw lines underneath tables instead of over them",
the optional clause tables (table-list) means "show only the tables in this list instead of all tables".
the table list should be a comma-delimited list of table names and each name can be followed by x and y coordinates,
for example "tables (customer 0 1, address 1 1" means "display customer in column 0 row 1 and display address in
column 1 row 1".


customize the display fonts and colors with set ocelot_grid_... statements, for example
set ocelot_grid_font_weight='bold' where value regexp '_id'; will cause column names which end with _id
(the primary keys) to be displayed with a bold font. move a mouse over a line to see the foreign key name.

charts


while a result set is visible, if some columns are numeric, press alt+shift+b to
display as a bar chart, alt+shift+p to display as a pie chart, alt+shift+l to display as a line chart. 
no plugins or separate programs are necessary.
but to customize the look of the charts, you will need client statements.


the basic statement syntax is
set ocelot_grid_chart = 'literal' [where clause];
after you've typed set ocelot_grid_chart = the prompt/autocomplete list wil be
bar | line | pie | bar vertical | bar stacked | bar vertical stacked | bar subgroup by value % 3
| bar subgroup by left(column_name, 2) | line subgroup by left(column_name, 2) | pie subgroup by left(column_name, 2) | [string]
-- and you can make your own combination for example
set ocelot_grid_chart = 'bar stacked subgroup by value % 5';
the optional where may include column_name | column_number | column_type
(relational operator) (literal value), along with and|or, as is usual for
any set ocelot_grid_... statements. for example
set ocelot_grid_chart = 'pie' where column_name = 'k';
set ocelot_grid_chart=''; will cancel all previous uses of set ocelot_chart_grid,
that is, it turns the feature off.


shortcut key combinations are:
alt+shift+b causes set ocelot_grid_chart='bar';
alt+shift+l causes set ocelot_grid_chart='line';
alt_shift+p causes set ocelot_grid_chart='pie';
alt+shift+n causes set ocelot_grid_chart='';
as usual, it is possible to change the key combinations with
set ocelot_shortcut... statements.


groups: charts make sense when representing numbers.
a "group" is any uninterrupted series of numbers in a result-set row.
for example, in
select 'a',1,2,3.7,4,'b',5e1,6,'c';
the first group is 1,2,3.7,4 and the second group is 5e1,6.
(that is the default. to change the default, use a where clause.)

subgroups. a group may be divided into subgroups.
subgrouping is what decides how sampling is done within a group.
different methods of subgrouping are appropriate for different
types of chart.
there is automatic subgrouping of pies because otherwise all
pie segments would have a single colour.
(different subgroups have different colours.)
there is automatic subgrouping of lines because otherwise the
points of all lines would be in the same axis and there would
be no apparent movement. the automatic subgrouping in this case
is subgroup by left(column_name,2) so it need not be specified.


layout of a cell. (after header, not including cell border.)
  +--------------------------------------------------+
  |    top                                           |
  |l |                                              l|
  |e |   canvas                                     e|
  |f |                                              g|
  |t |                                              e|
  |  |                                              n|
  |  |                                              d|
  |   _____________________________________________  |
  |   bottom                                         |
  +--------------------------------------------------+

but if cell size is small ocelotgui might cancel everything except the canvas.
canvas: is a non-optional component, it has the actual bar/line/pie chart.
legend: is on the right. icons and very short text.
top: text (not shown by default).
left: for vertical-bar or line has "values axis", for horizontal-bar has "samples axis". text, rotated 90 degrees.
left line: a straight line between left and canvas.
bottom: for horizontal-bar or line has "values axis", for vertical-bar has "samples axis". text.
bottom line: a straight line between canvas and bottom.
values axis: becomes next to left or bottom in a bar or line.
samples axis: becomes next to left or bottom in a bar or line.


it is possible to cancel or change any item except the canvas.
so a fuller statement of the set syntax can be
  set ocelot_grid_chart = '
  {bar|line|pie}          currently default=bar if this is missing, but don't do it
  [vertical]                        default is horizontal
  [stacked]                         default is grouping
  [top=value]                       default is null
  [right=value|legend|null]         default is legend
  [left=value|default|null]         default is default
  [bottom=value|default|null]       default is default
  [axis=null|all]                   default is all, anything but null will make axes appear
                         '
  where condition];
for example, to suppress everything except the canvas with a vertical bar chart:
set ocelot_grid_chart='bar vertical right=null left=null bottom=null axis=null';
for example, to add a top line along with the other components with a pie:
set ocelot_grid_chart='pie top=topper';


effects of other settings:
set ocelot_grid_font=... affects what font the text items have.
set ocelot_grid_cell_border_size=... affects the width of lines.
and other ocelot_grid settings may affect all cells including cells with charts.
any item value might be truncated. an easy way to change width of a single chart
is to use long column names, that is, instead of saying select 1, 2, 3; say
select 1 as really_long_column_name, 2, 3;
but for some charts it is possible to use "set ocelot_grid_cell_width=..." instead.


illustrations. pictures showing effects are in a blog post:
charts.
the current output may look slightly different from the illustrations there,
and the qwt library is no longer necessary.

make your own menus

there are sql-like statements for manipulating the main menus.
they all begin with set ocelot_query =, and they are all client statements.
you can execute them without being connected to a dbms server.
set ocelot_query =
  select * from menus;
set ocelot_query =
  delete from menus where id = 'id';
set ocelot_query =
  update menus set menuitem | shortcut | action = 'literal' where id = 'id';
set ocelot_query =
  insert into menus values ('id', 'menu-title', 'menu-item', 'action');


select result columns are id (a unique value which you need to know for the where clause in
other menu statements), menu_title (the name of a menu), menu_item (the name of a menu item
within a menu), action (what happens when you select a menu item), shortcut (a keysequence
that does the same thing as selecting the menu item). initially the action column will have
"[menu]" for a menu, "[separator]" for a line that sometimes is drawn between menu items,
and function names for every menu item. (you would see the same function names if you looked
at the ocelotgui source code.) 


suppose you want to remove the file|exit menu item. you would first use select to see that
the id is action_file_exit. then set ocelot_query = delete from menus where id = 'action_file_exit';
will remove it. but you could put it back later with set ocelot_query = insert into menus
values ('action_file_exit', 'file', 'exit', 'action_file_exit');.


suppose you want to change the edit|cut menu item to edit|couper. you would first use select
to find that the id is action_edit_cut. then set ocelot_query = update menus set menu_item
= 'couper' where id = 'action_edit_cut'; will change it. then you can change the shortcut,
with set ocelot_query = update menus set shortcut = 'ctrl+shift+x' where id = 'action_edit_cut';
as described earlier.


suppose you want to make a completely new menu with your own names and actions.
you don't need to insert a "[menu]" row, that will happen automatically when you insert a menu item.
so set ocelot_query = insert into menus values ('new_cut', 'new', 'cut!', 'action_edit_cut'); will
make a new menu and a new menu item new|cut! with an action that does the same thing as edit|cut.
then set ocelot_query = insert into menus values ('new_sql', 'new', 'sql!', 'select 5 as five, 6 as six union all  select 5, 6;'); will make a new menu item new|sql! that causes an sql statement.
so now the menu looks like this:

so whenever you have stock sql statements, or a series of sql statements, that you might want to
repeat frequently, you don't have to store them in a file and read the file with source. you can
have them in the menu. just remember: they must end with a semicolon.


you can also make a menu whose action is a plugin. plugins are described in the next section.

make your own plugins

a plugin is a routine in a library.
there are sql-like statements for manipulating the plugins.
they all begin with set ocelot_query =, and they are all client statements.
you can execute them without being connected to a dbms server.
set ocelot_query =
  select * from plugins;
set ocelot_query =
  delete from plugins where action = 'action';
set ocelot_query =
  insert into plugins values ('library', 'action');
... where action is the name of the routine in the library.
what the routine does is up to you, you have to write it, in c or c++.
the description here is only about the sql-like statements.

again, select is useful for seeing what plugins have been inserted, and delete is useful for undoing.
the insert will cause ocelotgui to search for a library (called a .so with linux or a .dll with windows),
and within that to search for a routine. there are two kinds of plugins: "trigger plugins" and "menu plugins".

when ocelotgui reaches one of a certain set of preset points in its code, it calls a
trigger plugin with a structured parameter that contains a lot of information about
state, values of current variables, and permanent settings. the trigger plugin can
act on the information, and in some cases can change it. for example, ocelotgui can call a trigger
plugin whenever it is about to pass an sql statement to the server, and the plugin can log the
request then change the sql statement to something completely different.


when a menu item has an action that is not one of the 'action_*' routines within the ocelotgui code,
and is not an sql statement ending with ';', it looks for a menu plugin and calls it. for example,
after set ocelot_query = insert into plugins values ('/home/pgulutzan/plugin/libplugin.so', 'menu_action');
and after set ocelot_query = insert into menus values ('menu_action', 'new', 'the example', 'menu_action');
and after set ocelot_query = update menus set shortcut = 'shift+f12' where id = 'menu_action';
and after the user either clicks the new/the example menu item or types shift+f12, the menu_action
function in libplugin.so will run.


this is not a manual about c/c++ coding so the rest is up to you.
but to make it as simple as possible, ocelotgui is packaged with a file named plugin.c.
it contains several example functions and several hundred words of commentary.

contact
we need feedback!
registered github users can simply go to
https://github.com/ocelot-inc/ocelotgui
and click the "star" button.
send bug reports and feature requests to
https://github.com/ocelot-inc/ocelotgui/issues.
or send a private note to pgulutzan at ocelot.ca.
there may be announcements from time to time on ocelot's
web page (ocelot.ca) or on the employee blog (http://ocelot.ca/blog).
any contributions will be appreciated.
appendix 1 details about ocelotgui options

an option is a named value which affects connecting and behavior.
most [ocelot] options are very similar to options of the mysql client.

the places that an option might be specified are:
within the program for example the default port value is 3306,
in an environment variable for example "export mysql_tcp_port=3306",
in a configuration file for example "port=3306" in $home/.my.cnf,
on the command line for example "./ocelotgui --port=3306",
or on the file|connect dialog box.

environment variables. the ocelotgui program will look at these variables:
home, ld_run_path, mysql_group_suffix, mysql_histfile,
mysql_histignore, mysql_host, mysql_ps1, mysql_pwd.
mysql_tcp_port, mysql_unix_port, mysql_test_login_file.

option files: the ocelotgui program will look in these option files:
/etc/my.cnf, /etc/mysql/my.cnf, [sysconfdir]/my.cnf,
[defaults-extra-file], $home/.my.cnf, $home/.mylogin.cnf.
within option files, the ocelotgui program will look
in these groups: [client], [mysql], [client-server], [ocelot],
as well as [client-mariadb] if --ocelot_dbms=mariadb is specified,
as well as groups with those names plus suffix x if --default_groups_suffix=x is specified.
on windows, the order is different: %system, %windir,
[application-directory], %mysql_home%, [defaults-extra-file].

command line: the ocelotgui program will look at command-line arguments
which are specified in short form such as "-p 3306", or
which are specified in long form such as "--port=3306".

dialog box: a dialog box will appear if the user enters a user statement
"connect;" or if the user chooses menu item file|connect.
the user will be advised to do this at startup time if an
initial attempt to connect fails.

example

the default value for "port" is 3306, this is
hard coded in the ocelotgui source.
the environment variable value for "port" is 3307, this is
set by "export mysql_tcp_port=3307" before starting ocelotgui.
the option file value for "port" is 3308, this is
set by putting "port=3308" in the [mysql] group in
the $home/.mysql.cnf file.
the command-line value for "port" is 3309, this is
set by putting "--port=3309" on the command line
when starting the ocelotgui program.
the dialog-box value for "port" is 3310, this is
set by choosing file|connect, entering "3310" in
the widget labelled "port", and clicking "ok".
the ocelotgui program reads the settings in the
above order, therefore the port number is 3310.

options in the following table are in the same order that one sees
on the file|connect dialog box: first come the 8 important connect
options (host, port, user, database, socket, password, protocol,
init_command), then all the other options in alphabetical order.
unless otherwise stated, options are specifiable by saying
[option_name] = [value] in an option file or
--[option_name] = [value] on the command line
(sometimes --[option_name] alone is sufficient for true|false values),
or in the dialog box.
if an option value is irrelevant or invalid, the ocelotgui program
ignores it without displaying an error message.

 

option
description


host
server address. specifiable with mysql_host
environment variable, with host= in an option file, with
-h or --host on the command line, or in dialog box.
example values: localhost 192.15.8.44 w@ww.com.
warning: if host=localhost, ocelotgui tries to use a socket,
if this is not desirable then say localhost=127.0.0.1 instead.


port
port that the server listens on, if the protocol is
tcp. specifiable with
mysql_tcp_port environment variable, with port= in an option
file, with -p or --port on the command line, or in dialog box.
example values: 3306 3307.


user
 user name. specifiable with user= in an option file,
with -u or --user on the command line, or in dialog box.
example values: root guest jsmith.


database
database name also known as schema name. specifiable
with database= in an option file, with -d or --database on the
command line, or in dialog box. example values: test account_data.



socket
socket name that the server receives on, if the
protocol is socket. specifiable with socket= in an option file,
with -s or --socket= on the command line, or in dialog box.
examples: var/lib/special.sock /home/user/x.sock.



password
password associated with the user. specifiable
with password= in an option file, with -p or --password= on
the command line, or in dialog box. if the password is
required but not specified, the dialog box will always appear.
examples: sesame top_secret#1


protocol
how the connection to the server occurs. possible
values are: blank or tcp or socket. if host=localhost and
protocol is blank, then socket is assumed. specifiable with
protocol= in an option file, with --protocol= on the command
line, or in dialog box. examples: tcp socket.


init_command
initial statement that should be executed as
soon as connect is complete. example: "select current_user()".


auto_rehash
if 1 (true), ocelotgui may try to
complete names.


auto_vertical_output
if 1 (true), ocelotgui will display
with one column per row.


batch
mostly ignored, but if 1 (true), history is not written.


compress
if 1 (true), value is passed to the server.


connect_expired_password
if 1 (true), ocelotgui goes into
sandbox mode if a password has expired at connect time.


connect_timeout
ignored.


debug
ignored.


debug_check
ignored.


debug_info
ignored.


default_auth
ignored.


default_character_set
ignored, ocelotgui needs utf-8.


defaults_extra_file
name of an additional option file.


defaults_file
ignored.


defaults_group_suffix
suffix that is added to the regular group
names for option files. for example, if defaults_group_suffix=_x,
then ocelotgui will look at options in groups client_x and mysql_x and
ocelot_x in addition to options in groups client and mysql and ocelot.


delimiter
what ends a statement, usually semicolon ";".


enable_cleartext_plugin
ignored.


execute
string to execute followed by program exit.


force
ignored, ocelotgui always ignores errors in options.


help
display a help message followed by program exit.


histfile
name of file where statements are logged to, usually
".mysql_history". ignored if batch=1. ignored if
histfile=/dev/null.


histignore
pattern to ignore when writing to histfile.
for example, if histignore is "*select*", then statements
containing the string "select" will not be written.


html
internally formats are html anyway even if one says
html=0, unless one starts with one of the non-html options such as
batch or xml. if one starts ocelotgui with --html --raw,
the actual html markup code will appear.


ignore_spaces
ignored.


ld_run_path
where to look for libmysqlclient.so. click help|libmysqlclient
for details.


line_numbers
ignored.


local_infile
if 1 (true), passed to the server.


login_path
where to find login file if it's not "~/.mylogin.cnf".


max_allowed_packet
passed to the server. default 16777216.

max_join_size
passed to the server. default 1000000.


named_commands
ignored.


net_buffer_length
passed to the server. default 16384.


no_beep
ignored, ocelotgui does not usually beep when errors occur.


no_defaults
if 1 (true), options in environment variables and option
files are read but not used.


ocelot_*
... options that begin with "ocelot_" are only recognized
by the ocelotgui client. everything on the settings menu has an
associated option name. the intuitively-named settings options are:
ocelot_explorer_action ocelot_explorer_applicable_dbmss ocelot_explorer_applicable_types
ocelot_explorer_background_color ocelot_explorer_detached ocelot_explorer_enabled
ocelot_explorer_font_family ocelot_explorer_font_size ocelot_explorer_font_style
ocelot_explorer_font_weight ocelot_explorer_height ocelot_explorer_left
ocelot_explorer_shortcut ocelot_explorer_text ocelot_explorer_text_color
ocelot_explorer_top ocelot_explorer_visible ocelot_explorer_width
ocelot_extra_rule_1_text_color ocelot_extra_rule_1_background_color
ocelot_extra_rule_1_condition ocelot_extra_rule_1_display_as
ocelot_grid_text_color ocelot_grid_background_color
ocelot_grid_header_background_color
ocelot_grid_font_family ocelot_grid_font_size ocelot_grid_font_style
ocelot_grid_font_weight ocelot_grid_cell_border_color
ocelot_grid_cell_border_size ocelot_grid_detached
ocelot_grid_html_settings
ocelot_grid_left
ocelot_grid_top
ocelot_grid_width
ocelot_grid_height
ocelot_grid_focus_cell_background_color
ocelot_grid_outer_color
ocelot_grid_cell_height
ocelot_grid_cell_width
ocelot_grid_tabs
ocelot_grid_tooltip
ocelot_history_text_color ocelot_history_background_color
ocelot_history_border_color ocelot_history_font_family
ocelot_history_font_size ocelot_history_font_style
ocelot_history_font_weight ocelot_menu_text_color ocelot_history_detached
ocelot_menu_background_color ocelot_menu_border_color
ocelot_menu_font_family ocelot_menu_font_size
ocelot_menu_font_style ocelot_menu_font_weight
ocelot_statement_text_color ocelot_statement_background_color
ocelot_statement_border_color ocelot_statement_font_family
ocelot_statement_font_size ocelot_statement_font_style
ocelot_statement_font_weight ocelot_statement_highlight_literal_color
ocelot_statement_highlight_identifier_color ocelot_statement_highlight_comment_color
ocelot_statement_highlight_operator_color ocelot_statement_highlight_keyword_color
ocelot_statement_prompt_background_color ocelot_statement_highlight_function_color
ocelot_statement_highlight_current_line_color ocelot_statement_detached.
see also: the ocelot_ options which aren't related to settings, below.
see also: the example.cnf file.


ocelot_client_side_functions
 ocelot_client_side_functions=0 turns off
the client-side functions, such as "select row_number() over ...".
this may be unnecessary with newer versions of mariadb.
the default is 1.


ocelot_dbms
--ocelot_dbms=x means assume the server dbms is x
until connection is made. the possible values are 'mysql',
'mariadb', and 'tarantool'. the default is 'mysql'.


ocelot_grid_tabs
ocelot_grid_tabs=5
means assume that a stored procedure can return up to 5 result sets.
the default is 16.


ocelot_language
--ocelot_language='english' means the menu and the
client error messages should be in english, --ocelot_language='french'
means the menu and the client error messages should be in french.
the default is 'english'.


ocelot_statement_syntax_checker
setting
ocelot_statement_syntax_checker=1 turns on the
syntax checker; setting ocelot_statement_syntax_checker=2
turns on the syntax checker and is insistent -- if ocelotgui
doesn't like the syntax checker, a confirmation dialog box
will appear. the default is 1.


ocelot_shortcut_*
ocelot_shortcut_connect, ocelot_shortcut_exit, etc. ...
you can change what the shortcut is, for any menu
item, by specifying its name and a new keysequence.
for example: set ocelot_shortcut_paste = 'ctrl+shift+k';
but since verson 2.4 it is better to say
set ocelot_query = update menus set shortcut='ctrl+shift+k'
where id = 'action_edit_paste';


one_database
ignored.


pager
ignored.


pipe
ignored.


plugin_dir
ignored.


print_defaults
if 1 (true), ocelotgui displays defaults and exits.


prompt
what to display on left of statement lines.
default is "mysql>".
the prompt can include special character sequences
for date, time, and line number.


quick
ignored.


raw
ignored.


reconnect
ignored.


safe_updates
if 1 (true), ocelotgui passes 1 to the server.


secure_auth
if 1 (true), ocelotgui passes 1 to the server.


select_limit
the maximum number of rows to select; default is 0
which means infinity; ocelotgui passes this to the server.


server_public_key
ignored.


shared_memory_base_name
ignored.


show_warnings
if 1 (true), ocelotgui displays warnings which
result from problems that the server detects.


sigint_ignore
if 1 (true), ocelotgui will not stop statements
when user types control-c or chooses the menu item run|kill.


silent
ignored.


ssl_*
ssl, ssl_ca, ssl_capath, ssl_cert, ssl_cipher, ssl_crl,
ssl_crlpath, ssl_key, ssl_verify_server_cert. ssl options
are accepted and passed to the server.


syslog
ignored.


table
ignored.


tee
name of a file to dump statements and results to.


unbuffered
ignored.


verbose
ignored.


version
if 1 (true), ocelotgui displays a version number and exits.


vertical
if 1 (true), results are displayed with one column
per line.


wait
ignored.


xml
if one starts with ocelotgui --xml, the grid display will
show raw xml. see also --html.


appendix 2 reference for the ocelotgui debugger (ocelotgui)
before trying to read this reference, it is a good idea to
become familiar with the ocelotgui client and try out the
simple demonstration on the ocelot.ca blog.

temporary warning: for debugging mysql version 8.0 routines,
you need a recent ocelotgui version as pushed to source on
or after june 2018. use ocelotgui version 1.0.7 or later.

all debug statements can be entered on the statement widget,
optionally ending with ";".
some debug statements can be invoked via the menu or with shortcut keys.
like other statements, debug statements are editable, are logged,
and can cause error or warning messages to appear in the history.
most statements can be entered even while the routine is running.
warning: the focus can change, be sure that the cursor is blinking
on the statement widget and not on the debug widget before entering
a statement.
the following table shows statements in alphabetical order.


statement
what it's for
syntax
example
remarks


$breakpoint
specifying a line where execution must stop.
$b[reakpoint [schema_identifier.] routine_identifier line_number [condition]
                 shortcut:
                 alt+1, or via menu: debug|breakpoint, or click on line
                 (if a shortcut is used, the breakpoint is set for
                 the routine that is currently being
                 displayed, for the line the cursor is on.)
$breakpoint test.p 5;
                 (the debugger must be running -- see $debug.)
if $breakpoint succeeds, a red marker will appear on
                 the left of the line. the breakpoint identifier will
                 be displayed on the debug widget.
                 users can set breakpoints on any line.
                 users should not set breakpoints twice on the same line.
                 later, if the user enters $continue or $next,
                 execution may stop when a line with a breakpoint is seen.
                 to turn off a breakpoint, a user may click on the line
                 (it is a "toggle" switch), or see $clear and $delete.
                 re condition:
                 a condition is an expression which must be true, otherwise
                 the breakpoint is ignored during execution. for example,
                 $breakpoint p20 5 x = 7;
                 sets a breakpoint which will only cause execution to halt
                 if x = 7. the expression must have the form
                 variable_name = literal, variable_name should be a
                 declared variable, and the literal should be numeric.
                 at time of writing, conditions are not well tested.


$clear
removing a breakpoint
$cl[ear] [schema_identifier.] routine_identifier line_number
                 shortcut:
                 alt+6, or via menu: debug|clear
                 (if a shortcut is used, the breakpoint is removed
                 for the routine that is currently being displayed,
                 for the line that the cursor is on.)
$clear p 5;
                 (the debugger must be running -- see $debug.)
                 (the breakpoint must exist (see $breakpoint.)
the breakpoint's red marker should disappear.
                 if it does not disappear, and a shortcut was used:
                 make sure the cursor is actually on the line, not
                 just on the line number, which is considered separate.


$continue
running the routine till it ends or till a breakpoint.
$co[ntinue]
                 shortcut:
                 alt+6, or via menu: debug|continue
$continue;
                 (the debugger must be running -- see $debug.)
$continue differs from $next and $step because it
                 does not halt on a following statement, it goes on
                 until it reaches a line with a breakpoint or until
                 the main routine ends.


$debug
beginning a debug session.
$deb[ug] [schema_identifier.] routine_identifier
                 [(parameter list)];
                 shortcut:
                 none, $debug is not on the debug menu.
$debug procedure21;
    $debug function_x(7);
    (the debugger must not be already running.
    the routine must be set up -- $setup.)
    the user must have appropriate privileges.)
if $debug is successful, then a debug widget
                 will appear (see section debug widget).


$exit
ending a debug session
$exi[t]
                 shortcut:
                 alt+7, or via menu: debug|exit
$exit;
                 (the debugger must be running -- see $debug.)



$information status
showing information about debugger status
$inf[ormation status]
                 shortcut:
                 alt+8, or via menu: debug|information
                 (choosing from the menu may not work on some platforms.)
$information status;
                 select * from xxxmdbug. information_status;
the $information status statement will populate a table
                 named xxxmdbug. information_status, which contains
                 debugger_name, debugger_version,
                 timestamp_of_status_message, number_of_status_message,
                 icc_count, schema_identifier, routine_identifier,
                 line_number, is_at_breakpoint, is_at_tbreakpoint,
                 is_at_routine_exit, stack_depth, last_command,
                 last_command_result, commands_count.
                 the most important items of information status are
                 displayed automatically along with the debug widget,
                 so $information status is only for advanced users.


$install
install the debugger
$ins[tall]
                 shortcut:
                 $install is not on the debug menu.
$install;
                 (the user must have appropriate privileges.)
a large group of procedures and tables are
                 placed in a database named xxxmdbug.
                 installation may take up to 20 seconds.
                 it is only necessary to run $install once,
                 but it may be redone, for example if a new
                 version of ocelotgui is used.
                 if $install is not done, none of the other
                 debug statements are possible.


$leave
exit from a loop without executing
$l[eave]
                 shortcut:
                 none, $leave is not on the debug menu.
suppose this routine is being debugged:
                 begin
                   declare x int;
                   set x = 0;
                   while x < 5 do
                     set x = x + 0;
                     end while;
                   end
                 the user types $continue, which gets the
                 program running -- in an infinite loop.
                 one way to break out of the loop is with
                 "$set x = 6;", another way is with $leave.
                 ($leave will also continue, so if you want
                 to stop after leaving you must set a brekapoint.)
                 (the debugger must be running --see $debug.)
                 (the procedure must be executing within a
                 loop.)
if the $leave statement is used when the
                 routine is not in a loop, consequences are
                 undefined -- this is not recommended.


$next
making the program go to the next statement
                 in the current routine.
$n[ext];
                 shortcut:
                 alt+3, or via menu: debug|next
suppose that the current line in procedure p is
                 select f() from t;
                 after $next, the current line changes to
                 the line following the select statement,
                 or (if this was the last line) routine exit.
                 (the debugger must be running --see $debug.)
$next is different from $step because $step
                 can drop into a subroutine, $next does not.


$refresh breakpoints
showing what breakpoints exist.
$refresh breakpoints;
                 shortcut:
                 none. $refresh breakpoints is not on the debug menu.
$refresh breakpoints;
    select * from xxxmdbug. breakpoints;
the $refresh breakpoints statement will populate a table
                 named xxxmdbug. breakpoints, which contains
                 breakpoint_identifier, schema_identifier,
                 routine_identifier, routine_type, line_number_minimum,
                 line_number_maximum, condition_identifier,
                 condition_operator, condition_value, hit_count,
                 is_temporary, is_temporary_and_to_be_cleared,
                 is_matching_location, call_stack_depth_when_set,
                 command. for simple breakpoints which were set up with
                 $breakpoint schema.routine line_number,
                 $refresh breakpoints is unnecessary because
                 breakpointed lines are marked in the debug widget.


$refresh call_stack
showing what the routines are that got us here.
$refresh call_stack
                 shortcut:
                 alt+b, or via menu: debug|refresh call_stack
                 (choosing from the menu may not work on some platforms.)
$refresh call_stack;
    select * from xxxmdbug. call_stack;
using menu debug | refresh call_stack will
                 cause two statements: $refresh and select.
                 the $refresh statement will populate a table
                 named xxxmdbug. call_stack, which contains
                 schema_identifier and routine_identifier and
                 routine_type and line_number, with one row
                 for each level. thus, if routine p1 calls
                 p2 and routine p2 calls p3, there are three rows.
                 all $refresh statements may be blocked.


$refresh server variables
showing the contents of server variables.
$refresh server_variables
                 shortcut:
                 alt+9, or via menu: debug|refresh server_variables
                 (choosing from the menu may not work on some platforms.)
$refresh server_variables;
    select * from xxxmdbug. server_variables;
using menu debug | refresh server_variables will
                 cause two statements: $refresh and select.
                 the $refresh statement will populate a table
                 named xxxmdbug. server_variables, which contains
                 variable_identifier and value and old_value.
                 for example, regardless what the routine is,
                 the available information will include that
                 there is a server variable named @@innodb_compression_level
                 which originally was null but now contains 6.
                 all $refresh statements may be blocked.
                 this statement is slow.


$refresh user variables
showing the contents of user variables.
$refresh user_variables
                 shortcut:
                 alt+a, or via menu: debug|refresh user_variables. 
        (choosing from the menu may not work on some platforms.)
$refresh user_variables;
    select * from xxxmdbug. user_variables;
using menu debug | refresh user_variables will
                 cause two statements: $refresh and select.
                 the $refresh statement will populate a table
                 named xxxmdbug. user_variables, which contains
                 variable_identifier and value and old_value.
                 thus, if routine p has:
                 1 begin
                 2  set @x = 1;
                 3  set @x = 2;
                 4  end;
                 and execution has stopped on line 3, the
                 available information is that x is a bigint,
                 which formerly
                 contained 1, and now contains 2.
                 all $refresh statements may be blocked.


$refresh variables
showing the contents of declared variables.
$refresh variables
                 shortcut:
                alt+b, or via menu: debug|refresh variables
$refresh variables;
                 select * from xxxmdbug. variables;
using menu debug | refresh variables will
                 cause two statements: $refresh and select.
                 the $refresh statement will populate a table
                 named xxxmdbug. variables, which contains
                 schema_identifier and routine_identifier and
                 routine_type and token_number_of_declare and
                 variable_identifier and data_type and value
                 and old_value and is_in_scope and is_settable
                 and is_updated_by_set. thus, if routine p has:
                 1 begin
                 2  declare x int;
                 3  set x = 1;
                 4  set x = 2;
                 5  end;
                 and execution has stopped on line 4, the
                 available information is that x is an integer
                 which was declared on line 2, which formerly
                 contained 1, and now contains 2, and is in scope.
                 all $refresh statements may be blocked.


$set
changing the value of a declared variable.
$set variable_name = value;
                 shortcut:
                 none, $set is not on the debug menu.
$set x = 55;
    $set y = ''k'';
    (the debugger must be running -- see $debug.)
    (the variable must be in scope.)
    (the value must be a literal.
    if it is a string literal, it must be
    enclosed within two quote marks --
    this is due to a temporary limitation.)

only declared variables (variables that
                 are specified with "declare variable_name ...")
                 can be changed with $set. there is no
                 statement for changing user variables or
                 system variables.
                 $set should only be done while at a breakpoint.


$setup

$setu[p] [schema_identifier.] routine_identifier
                 [, [schema_identifier.] routine_identifier ...]
                 shortcut:
                 none, $setup is not on the debug menu.
$setup p;
    $setup test.procedure1, test.function2;
    (the debugger must be installed -- (see $install.)
    (only procedures and functions may be listed,
    not triggers. for "$setup x.y", the user must
    have create privilege in schema x and execute
    privilege on routine y.)
unless a routine has been the object of $setup,
                 it cannot be debugged.
                 the $setup statement is slow, and if routines
                 are large it is very slow. however, the effect
                 is persistent so there is no need to run $setup
                 for every debug session -- it only needs to be
                 re-run if a routine is modified.
                 the maximum number of routines per setup is 10.
                 the $setup statement makes copies of routines,
                 but never never changes the original routines.
                 the default schema is what "select database();" returns.


$step
making the program go to the next statement
                 in the current routine or a subroutine.
$st[ep]
                 shortcut:
                 alt+5, or via menu: debug|step
suppose that the current line in procedure p is
                 select f() from t;
                 after $step, the current line changes to
                 the first line in function f.
                 (the debugger must be running -- see $debug.)
$step is different from $next because $step
                 can drop into a subroutine, $next does not.


$tbreakpoint
specifying a line where execution must stop, once.
$t[breakpoint [schema_identifier.] routine_identifier line_number
                 shortcut:
                 none, $tbreakpoint is not on the debug menu.
$tbreakpoint test.p 5;
                 (the debugger must be running -- see $debug.).
the effect is the same as for ordinary breakpoints,
                 see $breakpoint. however, a tbreakpoint (temporary
                 breakpoint) becomes disabled after being hit once.
                 generally it is better to use $breakpoint and
                 $clear; $tbreakpoint is not recommended.


debug widget
the debug widget appears at the bottom of the window after
execution of $debug, and disappears after execution of $exit.
it is a tabbed widget, that is, if $setup was done for multiple
routines, then the debug widget has multiple tabs and the user
can look at a particular routine by clicking its tab.
above the widget is a line with information about current state.
the state information includes the current position (what routine
and line number is currently being executed), the result of the
last debug statement, and whether the execution is currently halted
(it will show "stopped at breakpoint" initially because there is
automatically a temporary breakpoint at the start) (it will show
"executing" if it is running) (it will show "routine end" at end).
for example the line may contain
"debugger status = (current position: `test`.`p24` line 3)
 (last debug command: tbreakpoint test.p24 3, result: ok, breakpoint_identifier=3)
 (stopped at breakpoint)"
below the tab is a display of the routine source, with line numbers
on the left. this will appear to be editable; however, the only
reason for that is so that $breakpoint and $clear will work.
the line which is currently being executed will be highlighted.
a line which has a breakpoint will have a mark on the left.
the debug widget shares the settings of the statement widget.
for example, if the user clicks settings | statement widget and
changes the background color to yellow, then the debug widget
will also have a yellow background.
maintenance
the $install statement places many routines and tables in the
xxxmdbug database; to uninstall, simply drop the database.
the $setup statement places copies of routines in the same
databases that the original routines are in. these are not
dropped automatically; users or administrators should watch
for obsolete setup results.
the $refresh statements make temporary tables, which may
become large but which should disappear at session end.
privileges
to do $install, one needs authorization to create a new
database, xxxmdbug, and populate it. the user who does $install may
then choose to grant or revoke privileges on the procedures
of xxxmdbug so that debugging is limited to certain users.
to do $setup routine_name(s), one needs authorization to execute the
named routines and to create routines in the same database.
to do $debug, one needs authorization to execute both the
original routine and the copy that was made by $setup.
also, one needs read or execute authorization for objects in xxxmdbug.
also, one needs the super privilege.
security
before allowing ocelotgui in production systems, administrators should know:
the super privilege
allows ordinary users to do a few things which ordinarily they can't.
for anyone who knows the workings of the system, it is possible to
monitor or disrupt debugger activity. this means, for example, that
if a debugger user asks what is the current value of variable x,
some other user (with super privilege) could see that the request
was made and could see the value.
the debugger runs in a separate thread, this separate thread will
attempt to do a connect every time the user calls $debug, with the same
options and credentials as the one used for the main thread.
for passing messages between the debugger thread and the main
thread, the debugger makes heavy use of a system variable named
@@init_connect. it is our belief that the debugger will not interfere
with the ordinary usage of @@init_connect (for specifying what
to do when connecting); however, the reverse is definitely not true.
that is, if someone changes @@init_connect while the debugger is
running, the debugger could return unexpected results or even hang.
simultaneity
it is designed, but not tested in the field, that the debugger should
operate while others are simultaneously accessing the same data with
the same dbms instance. naturally the debugger will slow down other
operations if (say) a user chooses to stop at a breakpoint while a
table is locked -- but that is a user fault not a product flaw.
although the debugger is not terribly fast, the majority of the time in a stored
procedure is probably taken up by the sql statements rather than the
debugger's processing. therefore it should be possible to run a long
routine for hours or days, occasionally monitoring it to see what the
state of the variables is.
further information
the low-level part of the debugger is based on a product from
hewlett-packard called mdbug. 
an interesting early document is

http://bazaar.launchpad.net/~hp-mdbug-team/mdbug/trunk/view/head:/debugger.txt.
appendix 3 tarantool
nb: there is a better description of ocelotgui for tarantool in

https://github.com/ocelot-inc/ocelotgui-tarantool.
ordinarily ocelotgui is a client for
mysql/mariadb, and some documentation
assumes that. however, it is possible
to connect to tarantool 2.x  or 3.x (with sql) instead.
you get all the same features except the debugger.
the ocelotgui connection to tarantool is not produced or approved by tarantool.
you need the latest tarantool "sql" server.
the official "sql" release is available now,
look for it on https://github.com/tarantool/tarantool/releases.

download it according to the instructions
in the tarantool manual,
the version number must be 2.1.2 or later.
for a more current version, download from github.com/tarantool/tarantool
and build from source as instructed in the tarantool manual.
usually you do not need to install the tarantool client (libtarantool.so) library,
but it is possible to use it if you build ocelotgui with "cmake ... -docelot_third_party=0".
if you did that, then this is how to get tarantool.so.
the tarantool-dev package does not have it any more.
clone and follow the instructions at
github.com/tarantool/tarantool-c ...
cd ~
git clone https://github.com/tarantool/msgpuck.git tarantool-msgpuck
cd tarantool-msgpuck
cmake .
make
sudo make install
cd ~
git clone https://github.com/tarantool/tarantool-c tarantool-c
cd tarantool-c
cp ~/tarantool-msgpuck/msgpuck.h third_party/msgpuck/msgpuck.h
cmake .
make
sudo make install
warning: in the past the tarantool-c folks have changed
structs in the public api. if they do it again, ocelotgui
will crash.
warning: on some distros the installation will be to a
directory that is not on the distro's default path.
for example, if libtarantool.so ends up on /usr/local/lib,
you will have to say this before you start ocelotgui:
export ld_run_path=/usr/local/lib
or you can add --ld_run_path=/usr/local/lib on the
command line where you start ocelotgui.
on windows you do not need to install a
tarantool library, its code is embedded in ocelotgui.exe.
you need the latest ocelotgui client.
the release 2.4.0 version is okay at the time of release,
but some things might not be up to date.
it may be better to build it from source.
download from github.com/ocelot-inc/ocelotgui.
for this example we assume tarantool 2.x. start the tarantool server, and say:
box.cfg{listen=3301}
-- second connect if you want lua '...' to work
box.schema.user.grant('guest','read,write,execute','universe')
net_box = require('net.box')
ocelot_conn2=net_box.new('localhost:3301')
ocelot_conn2:eval('return 5')
nb: user 'guest' can read and write but not create. therefore
for demonstration purposes it is far better to be user 'admin'.
to assign a password to user 'admin', say:
box.schema.user.passwd('admin')
start ocelotgui thus:
ocelotgui --ocelot_dbms='tarantool' --port=3301 --host='localhost' --user='admin' --password='admin'
the initial screen should come up saying "ok", you're connected.
type some sql statements in the statement widget
at the bottom of the screen.
create table test1 (s1 int primary key, s2 varchar(5));
insert into test1 values (1,'a'),(2,'b'),(3,'c');
update test1 set s2 = s2 || '!';
select * from test1;
you'll see the usual hints appearing as you type.
you'll see the usual grid display when you type
enter, or control-e.
now type any other sql statements, as described
in the tarantool manual.
the tutorial sql statements
work.)
now type
lua 'return box.space._vindex:select()';
or simply
return box.space._vindex:select();
this will evaluate the expression, without sql.
the expression must return a result set.
the result will be tabular (rows and columns),
even though box.space._vindex was created with nosql.
bonus feature: a client statement,
create server id ... options (port ..., host ..., user ..., password ...);
allows a second connection. usually this is a connection
to a different server.
later you can use the second connection to create an sql table
that's populated from a nosql space, preserving
all the data and converting it to fit in table rows,
preserving names if they were made with a tarantool
format clause.
* the advantage is that the second server does no work
except (lua box.space.x:select); the main server makes a
temporary copy of the result set and the main server
does all work required for select-list computations,
group by, order by, etc. that should enhance throughput.
and, since it's now an sql table, you can create indexes
on it and do sql manipulations without needing nosql.
* the limitation is that you are now working on a copy
instead of the original; it might quickly go out of date.
* the big limitation is that the first column of the new
table is automatically and always the primary key.
therefore if there is any duplication in the space,
the create table statement will fail.
example:
  on #1 (server/lua):
  box.cfg{listen=3301}
  box.schema.user.grant('guest','read,write,create,execute','universe')
  box.execute([[create table a (s1 int primary key, s2 varchar(15));]])
  box.execute([[insert into a values (1,'wombat');]])
  on #2 (server/lua)
  box.cfg{listen=3302}
  box.schema.user.grant('guest','read,write,create,execute','universe')
  box.execute([[create table t2 (x1 int primary key, x2 varchar(15));]])
  box.execute([[insert into t2 values (0, 'hi!');]])
  on ocelotgui connection:
  create server id foreign data wrapper ocelot_tarantool options (port 3302, host 'localhost', user 'guest');
  create table y4 server id lua 'return box.space._space:select()';
  select * from y4;
-- it does not have to be a second server, so simplify the example.
-- it does not have to be lua '...', it can be return lua-expression.
-- we can have mariadb=main and tarantool=remote, or tarantool=main and tarantool=remote
images:
doubtless you have image (.png or .gif or .jpg) files on your system.
for this example, change the three "box.space.timages:insert" lines,
changing the file names to file names that are on your system, or
changing the directory to wherever you installed ocelotgui documentation.
then "copy" the example code here and "paste" it into the ocelotgui
statement widget. (sometimes it is better to copy and paste statements
one at a time rather than all at once.)
(important: "timages" is a quoted identifier, the quote marks are necessary.)

-- lua function to set a variable to a file contents: based on fio_read.lua:
function load_file(file_name)
  local fio = require('fio')
  local errno = require('errno')
  local f = fio.open(file_name, {'o_rdonly' })
  if not f then
    error("failed to open file: "..errno.strerror())
  end
  local data = f:read(1000000)
  f:close()
  return data
end;
drop table "timages";
create table "timages" (s1 int primary key, s2 scalar, s3 varchar(5));
box.space.timages:insert{1, load_file('/usr/share/doc/ocelotgui/shot1.jpg'), 'shot1'};
box.space.timages:insert{2, load_file('/usr/share/doc/ocelotgui/shot2.jpg'), 'shot2'};
box.space.timages:insert{3, load_file('/usr/share/doc/ocelotgui/shot3.png'), 'shot3'};
set ocelot_extra_rule_1_display_as = 'image';
set ocelot_extra_rule_1_condition = 'data_type like ''%blob''';
select * from "timages";

alternative: (details are left to the reader's imagination) we could instead use:
a lua function.


rules concerning ocelotgui when connecting to tarantool:
* all statements must end with ; (or something established by delimiter statement).
  this applies to lua as well as sql.
* if you want a result set for a lua request, you must say "return".
  for example "return box.space.t:select();" rather than "box.space.t:select();"
* sql-style comments /* ... */ will not be considered errors inside lua statements,
  but will not be passed to the server.
* statements may contain [[...]] strings, but not =[[...]]= strings.
* defaults are mysql/mariadb defaults:
  --delimiter is off
  but ansi_quotes is on.
* (possible flaw) when ocelotgui is displaying an image, cpu time rises.
* decisions to right-justify, or display as images, are automatic rather than dependent on data type.
* sql "verbs", for example commit, should not be used as lua identifiers.
* if you use sql, you need tarantool 2.1 or (preferably) a later version. if you only use lua, you can use tarantool 1.10 or an earlier version.
* we don't accept identifiers longer than 64 characters.

if the tarantool server version release date is after the date of the
ocelotgui release, then there will probably be problems because the parsers
are different. sometimes this can be solved by downloading ocelotgui source
and building again.
appendix 4 windows
these are extra instructions for ocelotgui for microsoft windows (tm).
the windows ocelotgui program has the same functionality
as the linux ocelotgui program, but is newer and has only
been tested with basic windows 10 64-bit machinery.
we believe that on some other windows platforms it won't start.
connection should work to any modern mysql or mariadb server.

how to get it:
* download the ocelotgui zip file from github.
  check https://github.com/ocelot-inc/ocelotgui/blob/master/readme.md
  to see where the latest release is. for example it might be
  https://github.com/ocelot-inc/ocelotgui/releases/download/2.4.0/ocelotgui-2.4.0-1.ocelotgui.zip
* unzip. it was zipped with 7-zip from http://www.7-zip.org,
  but other utilities should work. for example, on windows command prompt,
  if you have the powershell utility on your path:
  powershell expand-archive ocelotgui-2.4.0-1.ocelotgui.zip c:\ocelotgui
* read the copying and license arrangements.
  on windows ocelotgui is statically linked to qt and mariadb libraries,
  so the copyright and licensing is not the same as for linux.
* the unzipped package includes a file named ocelotgui.exe.
  this is the file that you need for day-to-day ocelotgui use.
  there is no installation file.
  there is no need to download a mysql/mariadb client library.
  there is no need to download a qt library.
  since ocelotgui.exe may read other files on the same directory,
  it is best to leave it in the directory that you unzipped to.
how to test it:
start up a mysql or mariadb server that is easily accessible
(ocelotgui can use ssl etc. but for an initial test make it easy).
let's assume the download directory is c:\ocelotgui.
let's assume the host is 192.168.1.65, the user name is 'root',
the password is 'root',  the port is 3306. say:
c:\ocelotgui.exe --port=3306 --host=192.168.1.65 --port=3306 --user=root --password=root --protocol=tcp
full instructions are in the main documentation.
the following notes are specifically for ocelotgui for windows.
* when connecting, use protocol=tcp.
* this is a 32-bit .exe file
* these dlls are used ... (they're all supplied with windows 10)
   ntdll.dll, wow64.dll, wow64win.dll, wow64cpu.dll
   -- should be in system32 for 32-bit process running on a 64-bit computer
* this dll might be used: libeay.dll.
  it only matters if there is a .mylogin.cnf file, which is rare.
  if libeay.dll is not found on the system, .mylogin.cnf is ignored.
* notice that the licence is slightly different from the linux distribution,
  because the mariadb client library and the qt library are statically linked
  (in the linux distribution they are dynamically linked and supplied separately).
* the program does not always take over the screen at start time.
   you have to look for an icon on the bottom and click it,
   or check the task manager.
* initial application load is very slow, although after that there are no known performance problems.
the rest of this appendix is for advanced users only.
building ocelotgui.exe from source

the instructions for building ocelotgui.exe -- for windows only -- are in https://github.com/ocelot-inc/ocelotgui/blob/master/readme.md#appendix-4.

appendix 5 getting and using the ocelotgui source
the ocelotgui source package has everything necessary to compile
and link and install for any linux distribution, or freebsd. if the typical
developer packages such as cmake and the gcc c/c++ compiler have
been installed already, building an executable usually takes
less than fifteen minutes.
the official location of the project is on github: https://github.com/ocelot-inc/ocelotgui.
this is where the latest source files are. this is what can be "cloned".
typically, to get it, one would install git, cd to a download directory, then

git clone https://github.com/ocelot-inc/ocelotgui

a clone has the latest source, but not executables.
a clone may contain patches which are not yet part of a release.
ordinarily users are advised to use a release rather than a clone,
until they have used ocelotgui for a while.
the releases for ocelot-inc/ocelotgui are also on github:
https://github.com/ocelot-inc/ocelotgui/releases.
a release includes the source files as of the release time.
although the release does not have the "latest" source which is
in ocelot-inc/ocelotgui, it usually is more stable.
a release file is highlighted in green
by github and is named ocelotgui-[version].tar.gz.
since version 1.0.9, there is also a release file named ocelotgui_[version].orig.tar.gz
which is preferable because it does not contain unnecessary executables.
thus release 2.4.0 is at
https://github.com/ocelot-inc/ocelotgui/releases/download/2.4.0/ocelotgui_2.4.0.orig.tar.gz.
typically, to get it, one would cd to a download directory, then

wget https://github.com/ocelot-inc/ocelotgui/releases/download/2.4.0/ocelotgui_2.4.0.orig.tar.gz

or use a browser to go to https://github.com/ocelot-inc/ocelotgui/releases
and click ocelotgui_2.4.0.orig.tar.gz.
on debian-like systems some packages must be installed first.
for example on ubuntu:
 sudo apt-get install build-essential gcc cmake make
 #the name of the following package (containing mysql.h) varies,
 #it might be libmariadbclient-dev or libmariadb-dev
 sudo apt-get install libmysqlclient-dev
 #do the following if and only if build is for use with qt4
 sudo apt-get install qt4-dev-tools
 #do the following if and only if build is for use with qt5
 #it is okay if qt5-default is absent
 sudo apt-get install qt5-default qtbase5-dev qt5-qmake qtbase5-dev-tools
 #do the following if and only if build is for use with qt6
 #it might be qt-6-base-dev and qt-6-base-dev-tools
 sudo apt-get install qt6-base-dev qt6-base-dev-tools
on rpm-like systems some packages must be installed first with
"yum install" or "dnf install" or "urpmi".
for example on mageia:
 urpmi gcc gcc-c++ make cmake git
 #the name of the following package (containing mysql.h) varies,
 #it might be lib64mariadb-devel or libmysqlclient-devel or mariadb-devel
 urpmi mysql-devel
 urpmi rpm-build       
 #do the following if and only if build is for use with qt4
 urpmi libqt4-devel
 #do the following if and only if build is for use with qt5
 #the name of the following package varies,
 #it might be qt5-qtbase-devel
 urpmi libqt5-devel
on fedora 35 which is an rpm-like system but might have qt6 not qt4 or qt5:
sudo dnf install qt6-qtbase qt-devel qt6-qtbase-devel
on manjaro which is an archlinux-like system:
# some people would recommend sudo pacman -s base-devel
sudo pacman -s binutils make gcc cmake 
sudo pacman -s mariadb-clients
(package builds on archlinux-like systems can also be done with the pkgbuild file in the ocelotgui github repository.)
unpack all the source files by saying:
 tar -zxvf ocelotgui_2.4.0.orig.tar.gz
 cd ocelotgui-2.4.0
at this point it is a good idea to examine the file cmakelists.txt.
this file has comments about options which are available to
customize the build process: cmake_prefix_path, cmake_install_prefix,
mysql_include_dir, with_qt4, ocelot_third_party, qt_version.
for explanation of these flags, read the comments
in the cmakelists.txt file.
if no customizing is necessary,
the typical build process is:
 make clean        # unnecessary the first time
 rm cmakecache.txt # unnecessary the first time
 cmake .
 make
 sudo make install
the above instructions will usually put the ocelotgui program and
directories in subdirectories of /usr/local, so if /usr/local/bin
is on your path then after this saying ocelotgui will start the program.
however, it is sometimes better to make and install a package,
which will cause a few additional steps to be performed, such as
registering so that ocelotgui can be started from the launcher.
peter gulutzan provides scripts that will create .deb or .rpm packages.
please read the comments in the scripts before using them.
for debian-like platforms say
 ./deb_build.sh
 sudo apt install /tmp/debian3/ocelotgui_2.4.0-1_amd64.deb
 #or sudo apt install /tmp/debian3/ocelotgui_2.4.0-1_i386.deb
for rpm-like platforms say
 ./rpm_build.sh
 sudo rpm -i ~/ocelotgui_rpm//rp/rpmbuild/rpms/x86_64/ocelotgui-2.4.0-1.x86_64.rpm
 #or sudo rpm -i ~/ocelotgui_rpm//rp/rpmbuild/rpms/x86_64/ocelotgui-2.4.0-1.i686.rpm
usually the result will go to subdirectories of /usr, in which case,
if /usr/bin is on your path, then saying ocelotgui will start the program.

some other facts about the source package, for users who
like to explore code ...
files with the extension *.png
or *.htm or *.md or *.txt or *.jpg are for documentation, the file
license.gpl is for legal requirements, and
files with the extension *.cpp or *.pro or *.h are source code.
the main() code is in ocelotgui.cpp. all the source code has
comments. since ocelotgui is a qt-using program, it is also
possible to use qt creator as an ide editor/compiler and qmake
to build -- the file ocelotgui.pro exists for this purpose,
and the comments at the end of ocelotgui.pro have more explanation.
for example, on ubuntu 14.04, if the intent is to rebuild for qt 4 from source,
these instructions have been known to work:

 sudo apt-get install qt4-qmake
 sudo apt-get install libqt4-dev
 cd [path to ocelotgui source files]
 make clean
 /usr/bin/qmake-qt4 -config release
 make
for more commentary about compiling and building,
read an ocelotgui.cpp comment that begins with the words
"general comments".
for instructions to build from source on microsoft windows,
see appendix 4 windows.



send enquiries or suggestions to peter gulutzan by commenting on the github site.

    
